{"level":"error","message":"[processSingleDocument] Errore: Unexpected token 'I', \"I apologiz\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'I', \"I apologiz\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:37:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:24:24)","timestamp":"2025-08-13T17:10:50.678Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:80:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:119:16)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:24:24)","timestamp":"2025-08-13T18:00:43.393Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore durante estrazione dati: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:80:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:119:16)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:24:24)","timestamp":"2025-08-13T18:00:43.394Z"}
{"level":"error","message":"[processSingleDocument] Errore: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco i dat\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:80:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:119:16)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:24:24)","timestamp":"2025-08-13T18:00:43.394Z"}
{"level":"error","message":"[processSingleDocument] Errore: Nessun file caricato","stack":"Error: Nessun file caricato\n    at processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:11:19)\n    at Layer.handle [as handle_request] (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/route.js:149:13)\n    at multerMiddleware (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:19:41)\n    at Layer.handle [as handle_request] (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/index.js:284:15\n    at router.process_params (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/index.js:346:12)","timestamp":"2025-08-14T16:17:09.281Z"}
{"level":"error","message":"[generateContracts] Errore: Cannot convert undefined or null to object","stack":"TypeError: Cannot convert undefined or null to object\n    at Object.entries (<anonymous>)\n    at file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:56:36\n    at Array.forEach (<anonymous>)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:55:11)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:26:26)","timestamp":"2025-08-19T19:17:46.065Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 6656 0 R","stack":"Error: Could not find page for PDFRef 6656 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:78:10)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:26:26)","timestamp":"2025-08-19T19:21:32.965Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 6656 0 R","stack":"Error: Could not find page for PDFRef 6656 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:78:10)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:26:26)","timestamp":"2025-08-19T19:24:55.249Z"}
{"level":"error","message":"[generateContracts] Errore: Multi error","stack":"Error: Multi error\n    at new XTTemplateError (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/docxtemplater/js/errors.js:21:16)\n    at throwMultiError (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/docxtemplater/js/errors.js:62:13)\n    at verifyErrors (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/docxtemplater/js/docxtemplater.js:186:5)\n    at Docxtemplater.compile (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/docxtemplater/js/docxtemplater.js:485:7)\n    at new Docxtemplater (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/docxtemplater/js/docxtemplater.js:226:12)\n    at generateDocx (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:51:17)\n    at generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:25:39)\n    at Layer.handle [as handle_request] (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/route.js:149:13)\n    at done (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:59:7)\n    at indicateDone (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:63:68)\n    at Multipart.<anonymous> (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:187:7)\n    at Multipart.emit (node:events:507:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-08-19T19:39:33.176Z"}
{"level":"error","message":"[generateContracts] Errore: spawn libreoffice ENOENT","stack":"Error: spawn libreoffice ENOENT\n    at ChildProcess._handle.onexit (node:internal/child_process:286:19)\n    at onErrorNT (node:internal/child_process:484:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-19T19:43:32.318Z"}
{"level":"error","message":"[processSingleDocument] Errore: extractDataWithClaudeSmartFromBuffer is not defined","stack":"ReferenceError: extractDataWithClaudeSmartFromBuffer is not defined\n    at processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)\n    at Layer.handle [as handle_request] (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/express/lib/router/route.js:149:13)\n    at done (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:59:7)\n    at indicateDone (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:63:68)\n    at Multipart.<anonymous> (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/multer/lib/make-middleware.js:187:7)\n    at Multipart.emit (node:events:507:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-08-23T12:37:53.494Z"}
{"level":"error","message":"[processSingleDocument] Errore: Could not execute GraphicsMagick/ImageMagick: gm \"convert\" \"-density\" \"300x300\" \"-quality\" \"75\" \"-[0]\" \"-units\" \"PixelsPerInch\" \"-resize\" \"768x512!\" \"-compress\" \"jpeg\" \"/var/folders/j3/t9f67scx13xbpyfgkwx67mnr0000gn/T/ocr-Lq9zlL/page.1.png\" this most likely means the gm/convert binaries can't be found","stack":"Error: Could not execute GraphicsMagick/ImageMagick: gm \"convert\" \"-density\" \"300x300\" \"-quality\" \"75\" \"-[0]\" \"-units\" \"PixelsPerInch\" \"-resize\" \"768x512!\" \"-compress\" \"jpeg\" \"/var/folders/j3/t9f67scx13xbpyfgkwx67mnr0000gn/T/ocr-Lq9zlL/page.1.png\" this most likely means the gm/convert binaries can't be found\n    at ChildProcess.<anonymous> (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/gm/lib/command.js:249:12)\n    at ChildProcess.emit (node:events:507:28)\n    at ChildProcess._handle.onexit (node:internal/child_process:292:12)\n    at onErrorNT (node:internal/child_process:484:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-23T12:39:53.604Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:70:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T12:58:24.036Z"}
{"level":"error","message":"[processSingleDocument] Errore: normalize is not defined","stack":"ReferenceError: normalize is not defined\n    at scoreTextQuality (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:19:18)\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:94:15)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:05:15.034Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:99:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:06:27.136Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:07:23.642Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:08:25.045Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:08:40.399Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:09:46.799Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T13:10:02.009Z"}
{"level":"error","message":"[processSingleDocument] Errore: d is not defined","stack":"ReferenceError: d is not defined\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:101:27)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T14:04:48.514Z"}
{"level":"error","message":"[processSingleDocument] Errore: printable is not defined","stack":"ReferenceError: printable is not defined\n    at scoreTextQuality (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:26:28)\n    at extractTextPreferPdfParseThenDocAI (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/textExtractionServiceFirebase.js:89:21)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:349:34)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:21:24)","timestamp":"2025-08-23T14:11:03.391Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 6656 0 R","stack":"Error: Could not find page for PDFRef 6656 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:80:10)\n    at async file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:42:32\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:40:27)","timestamp":"2025-08-23T18:53:26.480Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 491 0 R","stack":"Error: Could not find page for PDFRef 491 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:80:10)\n    at async file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:42:32\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:40:27)","timestamp":"2025-08-23T18:53:48.288Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 491 0 R","stack":"Error: Could not find page for PDFRef 491 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:80:10)\n    at async file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:42:32\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:40:27)","timestamp":"2025-08-23T18:55:42.635Z"}
{"level":"error","message":"[generateContracts] Errore: Could not find page for PDFRef 491 0 R","stack":"Error: Could not find page for PDFRef 491 0 R\n    at PDFForm.findWidgetPage (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:601:23)\n    at PDFForm.flatten (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/pdf-lib/cjs/api/form/PDFForm.js:458:33)\n    at generatePdf (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:80:10)\n    at async file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:42:32\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:40:27)","timestamp":"2025-08-23T18:57:26.746Z"}
{"level":"error","message":"[generateContracts] Errore: input source must be valid Stream or Buffer instance","stack":"Error: input source must be valid Stream or Buffer instance\n    at Archiver.append (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/archiver/lib/core.js:583:24)\n    at file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:59:25\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:55:9)","timestamp":"2025-08-26T08:00:48.955Z"}
{"level":"error","message":"[generateContracts] Errore: input source must be valid Stream or Buffer instance","stack":"Error: input source must be valid Stream or Buffer instance\n    at Archiver.append (/Users/johnnycannatella/WebstormProjects/sparkdocai/api/node_modules/archiver/lib/core.js:583:24)\n    at file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:59:25\n    at async Promise.all (index 0)\n    at async generateContracts (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/contractController.js:55:9)","timestamp":"2025-08-26T08:01:07.342Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:338:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:364:19)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:08:49.976Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore chiamata Claude Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","timestamp":"2025-08-26T12:08:49.976Z"}
{"level":"error","message":"[processSingleDocument] Errore: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"Error: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:367:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:08:49.977Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:338:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:364:19)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:09:52.938Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore chiamata Claude Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","timestamp":"2025-08-26T12:09:52.938Z"}
{"level":"error","message":"[processSingleDocument] Errore: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"Error: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:367:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:09:52.938Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:338:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:365:19)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:12:07.313Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore chiamata Claude Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","timestamp":"2025-08-26T12:12:07.313Z"}
{"level":"error","message":"[processSingleDocument] Errore: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"Error: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:368:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:12:07.313Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:338:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:365:19)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:13:48.440Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore chiamata Claude Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","timestamp":"2025-08-26T12:13:48.440Z"}
{"level":"error","message":"[processSingleDocument] Errore: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON","stack":"Error: Analisi LLM fallita: Unexpected token 'E', \"Ecco un ri\"... is not valid JSON\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:368:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T12:13:48.440Z"}
{"level":"error","message":"[queryClaude] Errore durante la chiamata a Claude: Unexpected token 'S', \"Sulla base\"... is not valid JSON","stack":"SyntaxError: Unexpected token 'S', \"Sulla base\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at queryClaude (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:339:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:366:19)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T13:24:25.923Z"}
{"level":"error","message":"[extractDataWithClaudeFromBuffer] Errore chiamata Claude Unexpected token 'S', \"Sulla base\"... is not valid JSON","timestamp":"2025-08-26T13:24:25.924Z"}
{"level":"error","message":"[processSingleDocument] Errore: Analisi LLM fallita: Unexpected token 'S', \"Sulla base\"... is not valid JSON","stack":"Error: Analisi LLM fallita: Unexpected token 'S', \"Sulla base\"... is not valid JSON\n    at extractDataWithClaudeFromBuffer (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/services/claudeService.js:369:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async processSingleDocument (file:///Users/johnnycannatella/WebstormProjects/sparkdocai/api/controllers/aiController.js:28:24)","timestamp":"2025-08-26T13:24:25.924Z"}
